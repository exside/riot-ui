"use strict";var rui={utils:{keycode:{ENTER:13,ARROW_DOWN:40,ARROW_UP:38,ARROW_LEFT:37,ARROW_RIGHT:39,BACKSPACE:8,ESC:27,DELETE:46}}};riot.tag2("autocomplete",'<div> <input type="text" name="_input" class="input" onkeydown="{handleArrowKeys}" onkeyup="{filterOptions}" onfocus="{showOptions}" onblur="{hideOptions}" placeholder="{opts.placeholder}"> <nav class="menu is-small" name="_optionList" if="{shouldShowOptions && filteredCount()}"> <a class="menu-block is-small {active: index == active}" each="{option, index in filtered}" onmouseover="{hoverOption}" onmousedown="{chooseCurrent}">{option.text} </a> </nav> </div>',"",'class="{focus: document.hasFocus() && _input === document.activeElement}"',function(e){var t=this,o=rui.utils.keycode;this.active=0,this.filtered=this.opts.options,this.filteredCount=function(){return t.filtered.length},this.hoverOption=function(e){!t.hoverLocked&&(t.active=e.item.index)},this.reset=function(){t._input.value="",t.selected=null,t.hideOptions()},this.hideOptions=function(){t.shouldShowOptions=!1},this.showOptions=function(){t.shouldShowOptions||(t.active=0),t.shouldShowOptions=!0},this.filterOptions=function(e){switch(e.keyCode){case o.ARROW_LEFT:case o.ARROW_RIGHT:break;case o.ESC:case o.ENTER:t.hideOptions();break;case o.ARROW_DOWN:case o.ARROW_UP:t.showOptions();break;default:var i=new RegExp("(^|\\s)"+t._input.value.trim(),"i");t.filtered=t.opts.options.filter(function(e){return i.test(e.text)}),t.active=0,t.showOptions()}return!0},this.chooseCurrent=function(){var e=t.filtered[t.active];t._input.value=e.text,t.opts.onchange&&t.selected!=e&&t.opts.onchange(e),t.selected=e,t.hideOptions(),t.update()},this.handleArrowKeys=function(e){switch(e.keyCode){case o.ARROW_DOWN:return t.lockHover(),e.preventDefault(),t.active=Math.min(t.active+1,t.filteredCount()-1),!1;case o.ARROW_UP:return t.lockHover(),e.preventDefault(),t.active=Math.max(0,t.active-1),!1;case o.ENTER:return t.chooseCurrent(),!0}return!0},this.lockHover=function(){var e=this,t=function o(){e.hoverLocked=!1,window.removeEventListener("mousemove",o)};window.addEventListener("mousemove",t),this.hoverLocked=!0},this.on("updated",function(){var e=t._optionList.querySelector(".active");if(e){var o=t._optionList.offsetHeight,i=t._optionList.scrollTop,n=e.offsetTop,s=e.offsetHeight;n+s>i+o&&(t._optionList.scrollTop+=n+s-i-o),i>=n&&(t._optionList.scrollTop=n)}})},"{ }"),riot.tag2("datepicker","","","",function(e){});