"use strict";var rui={utils:{keycode:{ENTER:13,ARROW_DOWN:40,ARROW_UP:38,ARROW_LEFT:37,ARROW_RIGHT:39,BACKSPACE:8,ESC:27,DELETE:46}}};riot.tag2("autocomplete",'<div> <input type="text" name="_input" onkeydown="{handleArrowKeys}" onkeyup="{filterOptions}" onfocus="{showOptions}" onblur="{hideOptions}" placeholder="{opts.placeholder}"> <ul name="_optionList" if="{shouldShowOptions && filteredCount()}"> <li each="{option, index in filtered}" class="{highlight: index == highlightIndex}" onmouseover="{hoverOption}" onmousedown="{chooseCurrent}">{option.text} </li> </ul> </div>',"",'class="{focus: document.hasFocus() && _input === document.activeElement}"',function(t){var e=this,i=rui.utils.keycode;this.shouldShowOptions=!1,this.highlightIndex=0,this.filtered=this.opts.options,this.selected=null,this.filteredCount=function(){return e.filtered.length},this.hoverOption=function(t){return e.highlightIndex=t.item.index},this.reset=function(){e._input.value="",e.selected=null,e.hideOptions()},this.hideOptions=function(){e.shouldShowOptions=!1},this.showOptions=function(){0==e.shouldShowOptions&&(e.highlightIndex=0),e.shouldShowOptions=!0},this.filterOptions=function(t){switch(t.keyCode){case i.ESC:case i.ENTER:e.hideOptions();break;case i.ARROW_LEFT:case i.ARROW_RIGHT:break;case i.ARROW_DOWN:case i.ARROW_UP:e.showOptions();break;default:var o=new RegExp("(^|\\s)"+e._input.value.trim(),"i");e.filtered=e.opts.options.filter(function(t){return o.test(t.text)}),e.highlightIndex=0,e.showOptions()}return!0},this.chooseCurrent=function(){var t=e.filtered[e.highlightIndex];e._input.value=t.text,e.opts.onchange&&e.selected!=t&&e.opts.onchange(t),e.selected=t,e.hideOptions(),e.update()},this.handleArrowKeys=function(t){switch(t.keyCode){case i.ARROW_DOWN:return t.preventDefault(),e.highlightIndex=Math.min(e.highlightIndex+1,e.filteredCount()-1),!1;case i.ARROW_UP:return t.preventDefault(),e.highlightIndex=Math.max(0,e.highlightIndex-1),!1;case i.ENTER:return e.chooseCurrent(),!0}return!0},this.on("updated",function(){var t=e._optionList.querySelector(".highlight");if(t){var i=e._optionList.offsetHeight,o=e._optionList.scrollTop,n=t.offsetTop,s=t.offsetHeight;n+s>o+i&&(e._optionList.scrollTop+=n+s-o-i),o>=n&&(e._optionList.scrollTop=n)}})},"{ }"),riot.tag2("datepicker","","","",function(t){});